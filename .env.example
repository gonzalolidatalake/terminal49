# Terminal49 Webhook Infrastructure - Environment Variables
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ============================================================================
# GCP Configuration
# ============================================================================
GCP_PROJECT_ID=li-customer-datalake
GCP_REGION=us-central1
GCP_LOCATION=us-central1

# Service Account (for local development)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ============================================================================
# Terminal49 API Configuration
# ============================================================================
TERMINAL49_API_KEY=41yu49dwHwmoN62pihXJ9Krc
TERMINAL49_WEBHOOK_SECRET=29b28321bf6f252fba7b3810b8
TERMINAL49_API_BASE_URL=https://api.terminal49.com/v2

# ============================================================================
# Supabase Configuration
# ============================================================================
SUPABASE_PROJECT_ID=srordjhkcvyfyvepzrzp
SUPABASE_URL=https://srordjhkcvyfyvepzrzp.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyb3JkamhrY3Z5Znl2ZXB6cnpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MTk2MDMsImV4cCI6MjA3ODA5NTYwM30.Ryw8CMs2FeT3nQeErJ-wrXmJCVU5gn-t33TAWfw8tK4
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyb3JkamhrY3Z5Znl2ZXB6cnpwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjUxOTYwMywiZXhwIjoyMDc4MDk1NjAzfQ.BV2vmD3GSpycdlqK7OERhZi5t7eiekOytJmF08rr6pQ

# Database connection (for direct PostgreSQL access)
SUPABASE_DB_HOST=db.srordjhkcvyfyvepzrzp.supabase.co
SUPABASE_DB_PORT=5432
SUPABASE_DB_NAME=postgres
SUPABASE_DB_USER=postgres
SUPABASE_DB_PASSWORD=tFKB1FYWcb0rhue5

# Connection pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ============================================================================
# BigQuery Configuration
# ============================================================================
BIGQUERY_DATASET_ID=terminal49_raw_events
BIGQUERY_DATASET=terminal49_raw_events  # Backward compatibility
BIGQUERY_TABLE_RAW_EVENTS=raw_events_archive
BIGQUERY_TABLE_HISTORICAL=events_historical

# ============================================================================
# Pub/Sub Configuration
# ============================================================================
PUBSUB_TOPIC_WEBHOOK_EVENTS=terminal49-webhook-events
PUBSUB_TOPIC_DLQ=terminal49-webhook-events-dlq
PUBSUB_SUBSCRIPTION_PROCESSOR=terminal49-webhook-events-sub

# ============================================================================
# Cloud Functions Configuration
# ============================================================================
FUNCTION_WEBHOOK_RECEIVER_URL=https://us-central1-li-customer-datalake.cloudfunctions.net/terminal49-webhook-receiver
FUNCTION_EVENT_PROCESSOR_URL=https://us-central1-li-customer-datalake.cloudfunctions.net/terminal49-event-processor

# Function settings
FUNCTION_TIMEOUT=60
FUNCTION_MEMORY=256
FUNCTION_MAX_INSTANCES=100

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_STRUCTURED_LOGGING=true

# ============================================================================
# Monitoring Configuration
# ============================================================================
ENABLE_CLOUD_MONITORING=true
ENABLE_CLOUD_TRACE=false
ENABLE_CLOUD_PROFILER=false

# ============================================================================
# Development/Testing Configuration
# ============================================================================
ENVIRONMENT=development
DEBUG=false
ENABLE_LOCAL_TESTING=true

# Local development ports
LOCAL_WEBHOOK_PORT=8080
LOCAL_PROCESSOR_PORT=8081

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_BIGQUERY_ARCHIVAL=true
ENABLE_SIGNATURE_VALIDATION=true
ENABLE_RATE_LIMITING=false
ENABLE_IP_WHITELIST=false

# ============================================================================
# Performance Tuning
# ============================================================================
WEBHOOK_RESPONSE_TIMEOUT=5
EVENT_PROCESSING_TIMEOUT=120
BATCH_SIZE=100
MAX_RETRIES=3
RETRY_BACKOFF_MULTIPLIER=2

# ============================================================================
# Security
# ============================================================================
# Allowed source IPs (comma-separated, optional)
# ALLOWED_SOURCE_IPS=1.2.3.4,5.6.7.8

# CORS settings (if needed)
# CORS_ALLOWED_ORIGINS=https://yourdomain.com

# ============================================================================
# Cost Optimization
# ============================================================================
# Enable cost tracking
ENABLE_COST_TRACKING=true

# Budget alert threshold (USD)
MONTHLY_BUDGET_ALERT=100

# ============================================================================
# Testing Configuration
# ============================================================================
# Use test/sandbox endpoints
USE_TERMINAL49_SANDBOX=false
TERMINAL49_SANDBOX_API_URL=https://sandbox.terminal49.com/v2

# Mock external services for testing
MOCK_TERMINAL49_API=false
MOCK_BIGQUERY=false
MOCK_SUPABASE=false
